/*! skrollr v0.4.3 https://github.com/Prinzhorn/skrollr | free to use under terms of MIT license *//*jshint smarttabs:true */(function(a,b,c){function I(a){$=this,a=a||{},gb=a.constants||{};if(a.easing)for(var c in a.easing)H[c]=a.easing[c];bb={beforerender:a.beforerender,render:a.render},cb=a.forceHeight!==!1,cb&&(fb=a.scale||1);if(cb){var d=b.createElement("div"),g=d.style;g.width="1px",g.position="absolute",g.right=g.top=g.zIndex="0",f.appendChild(d),eb=function(){g.height=db+e.clientHeight+"px",J()}}else eb=function(){db=f.scrollHeight-e.clientHeight,J(),lb=!0};return $.refresh(),U("resize",eb),M(),$}"use strict";var d=Object.prototype.hasOwnProperty,e=b.documentElement,f=b.body,g="rendered",h="un"+g,i="skrollable",j="linear",k=1e3,l="start",m="end",n="top",o="center",p="bottom",q="___has_rendered_class",r="___skrollable_id",s=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/30)},t=/^\s*(.+)\s*$/m,u=/^data(?:-(_\w+))?(?:-?(-?\d+))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,v=/:|;/g,w=/^([a-z\-]+)\[(\w+)\]$/,x=/-([a-z])/g,y=function(a,b){return b.toUpperCase()},z=/(:?\+|-)?[\d.]+/g,A=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,B=/[a-z\-]+-gradient/g,C=/^O|Moz|webkit|ms/,D,E;if(a.getComputedStyle){var F=a.getComputedStyle(f,null);for(var G in F){D=G.match(C)||+G==G&&F[G].match(C);if(D)break}}D=(D||[""])[0],E="-"+D.toLowerCase()+"-",C=c;var H={begin:function(){return 0},end:function(){return 1},linear:function(a){return a},quadratic:function(a){return a*a},cubic:function(a){return a*a*a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5},bounce:function(a){var b;if(a<=.5083)b=3;else if(a<=.8489)b=9;else if(a<=.96208)b=27;else{if(!(a<=.99981))return 1;b=91}return 1-Math.abs(3*Math.cos(a*b*1.028)/b)}};I.prototype.refresh=function(a){var d,e=!1;a===c?(e=!0,ab=[],mb=0,a=b.getElementsByTagName("*")):a=[].concat(a);for(d=0;d<a.length;d++){var f=a[d],j=f,k=[];if(!f.attributes)continue;for(var n=0;n<f.attributes.length;n++){var o=f.attributes[n];if(o.name==="data-anchor-target"){j=b.querySelector(o.value);if(j===null)throw'Unable to find anchor target "'+o.value+'"';continue}var p=o.name.match(u);if(p!==null){var q=p[1];q=q&&gb[q.substr(1)]||0;var s=(p[2]|0)*fb+q,t=p[3],v=p[4]||t,w={offset:s,props:o.value,element:f};k.push(w),!t||t===l||t===m?(w.mode="absolute",t===m?w.isEnd=!0:(w.frame=s,delete w.offset,w.frame>db&&(db=w.frame))):(w.mode="relative",w.anchors=[t,v])}}if(k.length){var x;!e&&r in f?x=f[r]:x=f[r]=mb++,ab[x]={element:f,anchorTarget:j,keyFrames:k},V(f,[i,h],[g])}}eb();for(d=0;d<a.length;d++){var y=ab[a[d][r]];if(y===c)continue;y.keyFrames.sort(Z),N(y),P(y)}return $},I.prototype.animateTo=function(a,b){b=b||{};var d=Y(),e=$.getScrollTop();return kb={startTop:e,topDiff:a-e,targetTop:a,duration:b.duration||k,startTime:d,endTime:d+(b.duration||k),easing:H[b.easing||j],done:b.done},kb.topDiff||(kb.done&&kb.done.call($),kb=c),$},I.prototype.setScrollTop=function(b){return a.scroll(0,b),$},I.prototype.getScrollTop=function(b){return a.pageYOffset||e.scrollTop||f.scrollTop||0},I.prototype.on=function(a,b){return bb[a]=b,$},I.prototype.off=function(a){return delete bb[a],$};var J=function(){for(var a=0;a<ab.length;a++){var b=ab[a],c=b.anchorTarget,d=b.keyFrames;for(var e=0;e<d.length;e++){var f=d[e];f.mode==="relative"?f.frame=K(c,f.anchors[0],f.anchors[1])-f.offset:f.isEnd&&(f.frame=db-f.offset)}}},K=function(a,b,c){var d=e.clientHeight,f=a.getBoundingClientRect(),g=f.top;return b===p?g-=d:b===o&&(g-=d/2),c===p?g+=f.height:c===o&&(g+=f.height/2),g+=$.getScrollTop(),g+.5|0},L=function(a){for(var b=0;b<ab.length;b++){var c=ab[b],e=c.keyFrames,f=e[0].frame,i=e[e.length-1].frame,j=a<=f,k=a>=i,l,m;if(j||k){var n=e[j?0:e.length-1].props;for(l in n)d.call(n,l)&&(m=S(n[l].value),T(c.element,l,m));c[q]&&(a<f||a>i)&&(V(c.element,[h],[g]),c[q]=!1);continue}c[q]||(V(c.element,[g],[h]),c[q]=!0);for(var o=0;o<e.length-1;o++)if(a>=e[o].frame&&a<=e[o+1].frame){var p=e[o],r=e[o+1];for(l in p.props)if(d.call(p.props,l)){var s=(a-p.frame)/(r.frame-p.frame);s=p.props[l].easing(s),m=R(p.props[l].value,r.props[l].value,s),m=S(m),T(c.element,l,m)}break}}},M=function(){var a;if(kb){var b=Y();if(b>=kb.endTime)$.setScrollTop(kb.targetTop),a=kb.done,kb=c;else{var d=kb.easing((b-kb.startTime)/kb.duration);$.setScrollTop(kb.startTop+d*kb.topDiff|0)}}jb=$.getScrollTop(),jb<0&&(jb=0);if(lb||ib!==jb){hb=jb>=ib?"down":"up",lb=!1;var e={curTop:jb,lastTop:ib,maxTop:db,direction:hb},f=bb.beforerender&&bb.beforerender.call($,e);f!==!1&&(L(jb),ib=jb,bb.render&&bb.render.call($,e)),a&&a.call($)}s(function(){M()})},N=function(a){for(var b=0;b<a.keyFrames.length;b++){var c=a.keyFrames[b],d=c.props.split(v),e,f,g;c.props={};for(var h=0;h<d.length-1;h+=2)e=W(d[h]),f=W(d[h+1]),g=e.match(w),g!==null?(e=g[1],g=g[2]):g=j,f=f.indexOf("!")?O(f):[f.slice(1)],c.props[e]={value:f,easing:H[g]}}},O=function(a){var b=[];return A.lastIndex=0,a=a.replace(A,function(a){return a.replace(z,function(a){return a/255*100+"%"})}),B.lastIndex=0,a=a.replace(B,function(a){return E+a}),a=a.replace(z,function(a){return b.push(+a),"?"}),b.unshift(a),b},P=function(a){var b={},c;for(c=0;c<a.keyFrames.length;c++)Q(a.keyFrames[c],b);b={};for(c=a.keyFrames.length-1;c>=0;c--)Q(a.keyFrames[c],b)},Q=function(a,b){var c;for(c in b)d.call(a.props,c)||(a.props[c]=b[c]);for(c in a.props)b[c]=a.props[c]},R=function(a,b,c){if(a.length!==b.length)throw"Can't interpolate between \""+a[0]+'" and "'+b[0]+'"';var d=[a[0]];for(var e=1;e<a.length;e++)d[e]=a[e]+(b[e]-a[e])*c;return d},S=function(a){var b=1;return a[0].replace(/\?/g,function(){return a[b++]})},T=function(a,b,c){var d=a.style;b=b.replace(x,y).replace("-","");if(b==="zIndex")d[b]=""+(c|0);else try{d[D+b.slice(0,1).toUpperCase()+b.slice(1)]=c,d[b]=c}catch(e){}if(_.setStyle)for(var f=0;f<_.setStyle.length;f++)_.setStyle[f].call($,a,b,c)},U=function(b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},V=function(b,c,d){var e="className";a.SVGElement&&b instanceof a.SVGElement&&(b=b[e],e="baseVal");var f=b[e];for(var g=0;g<c.length;g++)X(f).indexOf(X(c[g]))===-1&&(f+=" "+c[g]);for(var h=0;h<d.length;h++)f=X(f).replace(X(d[h])," ");b[e]=W(f)},W=function(a){return a.replace(t,"$1")},X=function(a){return" "+a+" "},Y=function(){return+(new Date)},Z=function(a,b){return a.frame-b.frame},$,_={},ab=[],bb,cb,db=0,eb,fb=1,gb,hb="down",ib=-1,jb=0,kb,lb,mb=0;a.skrollr={init:function(a){return $||new I(a)},plugin:function(a,b){_[a]?_[a].push(b):_[a]=[b]},VERSION:"0.4.3"}})(window,document);